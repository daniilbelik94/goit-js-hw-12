{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error-message.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const gethPhotos = (searchValue, page) => {\n  const axiosOptions = {\n    params: {\n      q: searchValue,\n      orientation: 'portrait',\n      page: page,\n      per_page: 15,\n      key: '39461522-3585b4ffe1c253549e3ec0e9b',\n      image_type: 'photo',\n      safesearch: true,\n    },\n  };\n\n  return axios.get('', axiosOptions);\n};\n","export const createGalleryElement = galleryElementInfo => {\n  return `\n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${galleryElementInfo.largeImageURL}\">\n      <img class=\"gallery-img\"\n      src=\"${galleryElementInfo.webformatURL}\"\n      alt=\"${galleryElementInfo.tags}\"\n      loading=\"lazy\" />\n    </a>\n    <ul class=\"gallery-info\">\n      <li class=\"gallery-info-item\">\n        <p class=\"gallery-info-title\">Likes</p>\n        <p class=\"gallery-info-text\">${galleryElementInfo.likes}</p>\n      </li>\n      <li class=\"gallery-info-item\">\n        <p class=\"gallery-info-title\">Views</p>\n        <p class=\"gallery-info-text\">${galleryElementInfo.views}</p>\n      </li>\n      <li class=\"gallery-info-item\">\n        <p class=\"gallery-info-title\">Comments</p>\n        <p class=\"gallery-info-text\">${galleryElementInfo.comments}</p>\n      </li>\n      <li class=\"gallery-info-item\">\n        <p class=\"gallery-info-title\">Downloads</p>\n        <p class=\"gallery-info-text\">${galleryElementInfo.downloads}</p>\n      </li>\n    </ul>\n  </li>\n  `;\n};\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cpath%20fill='%23FAFAFB'%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20fill='%23FAFAFB'%20d='M6.969%206.97a.75.75%200%200%201%201.062%200L12%2010.94l3.969-3.97a.75.75%200%201%201%201.062%201.061l-3.97%203.97%203.97%203.968a.753.753%200%200%201%200%201.062.749.749%200%200%201-1.062%200L12%2013.061l-3.969%203.97a.75.75%200%200%201-1.225-.243.751.751%200%200%201%20.163-.819L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/svg%3e\"","import iziToast from 'izitoast';\n\nimport { gethPhotos } from './js/pixabay-api';\nimport { createGalleryElement } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\n\nimport errorMessage from './img/error-message.svg';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery-list');\nconst loadBtn = document.querySelector('.loader-btn');\nconst loaderBox = document.querySelector('.loader-box');\n\nlet searchInputValue = '';\nlet currentPage = 1;\nlet cardHeight = 0;\nlet quantityElements = 0;\n\nform.addEventListener('submit', onFormSubmit);\nloadBtn.addEventListener('click', onLoadBtnClick);\n\nconst simpleLightbox = new SimpleLightbox('.gallery-list a', {\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n  overlayOpacity: 1,\n});\n\nasync function onFormSubmit(e) {\n  try {\n    e.preventDefault();\n\n    currentPage = 1;\n    quantityElements = 0;\n\n    searchInputValue = form.elements.search.value.trim();\n\n    if (searchInputValue === '') {\n      return;\n    }\n\n    gallery.innerHTML = '';\n\n    loaderBox.classList.add('loader-box-active');\n\n    const response = await gethPhotos(searchInputValue, currentPage);\n\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        titleColor: '#fff',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorMessage,\n        maxWidth: '385px',\n        timeout: 5000,\n      });\n\n      form.reset();\n      form.elements.search.focus();\n      loaderBox.classList.remove('loader-box-active');\n      loadBtn.classList.remove('loader-box-active');\n      return;\n    }\n\n    const galleryCardsTemplate = response.data.hits\n      .map(imgInfo => createGalleryElement(imgInfo))\n      .join('');\n\n    gallery.innerHTML = galleryCardsTemplate;\n    cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    simpleLightbox.refresh();\n    form.reset();\n    form.elements.search.focus();\n    loaderBox.classList.remove('loader-box-active');\n    loadBtn.classList.add('loader-box-active');\n    quantityElements += response.data.hits.length;\n\n    if (quantityElements < 15) {\n      loadBtn.classList.remove('loader-box-active');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.show({\n      message: 'An error occurred. Please try again later.',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      titleColor: '#fff',\n      titleSize: '16px',\n      titleLineHeight: '24px',\n      messageColor: '#fff',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      iconUrl: errorMessage,\n      maxWidth: '385px',\n      timeout: 5000,\n    });\n  }\n}\n\nasync function onLoadBtnClick() {\n  try {\n    currentPage++;\n\n    loaderBox.classList.add('loader-box-active');\n\n    const response = await gethPhotos(searchInputValue, currentPage);\n\n    const galleryCardsTemplate = response.data.hits\n      .map(imgInfo => createGalleryElement(imgInfo))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n    simpleLightbox.refresh();\n\n    loaderBox.classList.remove('loader-box-active');\n\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    quantityElements += response.data.hits.length;\n\n    if (quantityElements >= response.data.totalHits) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        titleColor: '#fff',\n        titleSize: '16px',\n        titleLineHeight: '24px',\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorMessage,\n        maxWidth: '385px',\n        timeout: 5000,\n      });\n      loaderBox.classList.remove('loader-box-active');\n      loadBtn.classList.remove('loader-box-active');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.show({\n      message: 'An error occurred. Please try again later.',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      titleColor: '#fff',\n      titleSize: '16px',\n      titleLineHeight: '24px',\n      messageColor: '#fff',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      iconUrl: errorMessage,\n      maxWidth: '385px',\n      timeout: 5000,\n    });\n  }\n}\n"],"names":["axios","gethPhotos","searchValue","page","axiosOptions","createGalleryElement","galleryElementInfo","errorMessage","form","gallery","loadBtn","loaderBox","searchInputValue","currentPage","cardHeight","quantityElements","onFormSubmit","onLoadBtnClick","simpleLightbox","SimpleLightbox","response","iziToast","galleryCardsTemplate","imgInfo","error"],"mappings":"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"}